<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="1" skipped="0" tests="46" time="29.584" timestamp="2026-02-22T08:56:25.313835+00:00" hostname="agent-env-ad9723b5-9bab-4df8-b682-50772331538f"><testcase classname="tests.test_analytics_payroll_travel.TestAuth" name="test_admin_login_success" time="0.742" /><testcase classname="tests.test_analytics_payroll_travel.TestAuth" name="test_sales_manager_login_success" time="0.528" /><testcase classname="tests.test_analytics_payroll_travel.TestAuth" name="test_invalid_credentials" time="0.155" /><testcase classname="tests.test_analytics_payroll_travel.TestAuth" name="test_missing_password" time="0.160" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_funnel_summary_authenticated" time="0.615" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_funnel_summary_with_period_filter" time="1.075" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_funnel_summary_unauthenticated" time="0.225" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_my_funnel_summary" time="0.586" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_funnel_trends_manager_only" time="1.123" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_bottleneck_analysis" time="0.656" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_forecasting_endpoint" time="0.530" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_time_in_stage_analytics" time="0.587" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_win_loss_analysis" time="0.549" /><testcase classname="tests.test_analytics_payroll_travel.TestAnalyticsRouter" name="test_velocity_metrics" time="0.546"><failure message="AssertionError: assert 'total_completed_deals' in {'deals': [{'close_date': '2026-02-21T17:47:29.180402+00:00', 'company': 'Kunal Test Corporation', 'days': 0, 'lead_date': '2026-02-21T17:43:06.814533+00:00', ...}, {'close_date': '2026-02-03T18:20:41.466834', 'company': 'FastTrack Corp', 'days': 27, 'lead_date': '2026-01-07T18:20:41.466834', ...}, {'close_date': '2026-02-16T18:20:41.466834', 'company': 'SlowBurn Inc', 'days': 85, 'lead_date': '2025-11-23T18:20:41.466834', ...}, {'close_date': '2026-02-13T18:20:41.466834', 'company': 'Quick Win Ltd', 'days': 22, 'lead_date': '2026-01-22T18:20:41.466834', ...}], 'fastest_deal': {'company': 'Kunal Test Corporation', 'days': 0}, 'insights': ['Average time to close: 33.5 days', 'Fastest deal: Kunal Test Corporation (0 days)', 'Slowest deal: SlowBurn Inc (85 days)', 'Based on 4 completed deals'], 'slowest_deal': {'company': 'SlowBurn Inc', 'days': 85}, ...}">tests/test_analytics_payroll_travel.py:201: in test_velocity_metrics
    assert "total_completed_deals" in data
E   AssertionError: assert 'total_completed_deals' in {'deals': [{'close_date': '2026-02-21T17:47:29.180402+00:00', 'company': 'Kunal Test Corporation', 'days': 0, 'lead_date': '2026-02-21T17:43:06.814533+00:00', ...}, {'close_date': '2026-02-03T18:20:41.466834', 'company': 'FastTrack Corp', 'days': 27, 'lead_date': '2026-01-07T18:20:41.466834', ...}, {'close_date': '2026-02-16T18:20:41.466834', 'company': 'SlowBurn Inc', 'days': 85, 'lead_date': '2025-11-23T18:20:41.466834', ...}, {'close_date': '2026-02-13T18:20:41.466834', 'company': 'Quick Win Ltd', 'days': 22, 'lead_date': '2026-01-22T18:20:41.466834', ...}], 'fastest_deal': {'company': 'Kunal Test Corporation', 'days': 0}, 'insights': ['Average time to close: 33.5 days', 'Fastest deal: Kunal Test Corporation (0 days)', 'Slowest deal: SlowBurn Inc (85 days)', 'Based on 4 completed deals'], 'slowest_deal': {'company': 'SlowBurn Inc', 'days': 85}, ...}</failure></testcase><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_salary_components" time="0.528" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_salary_components_requires_auth" time="0.135" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_update_salary_components_admin_only" time="1.083" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_add_salary_component_validation" time="0.589" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_payroll_inputs_hr_only" time="1.089" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_save_payroll_input_validation" time="0.623" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_salary_slips" time="0.533" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_generate_salary_slip_validation" time="0.533" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_payroll_summary_report" time="0.532" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_pending_reimbursements" time="0.561" /><testcase classname="tests.test_analytics_payroll_travel.TestPayrollRouter" name="test_get_linkage_summary" time="0.558" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_get_travel_rates" time="0.542" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_travel_rates_requires_auth" time="0.135" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_calculate_distance" time="0.629" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_calculate_distance_validation" time="0.539" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_calculate_distance_round_trip" time="0.585" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_get_travel_reimbursements" time="0.542" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_get_travel_reimbursements_with_filter" time="0.607" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_create_travel_reimbursement" time="0.527" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_create_travel_reimbursement_validation" time="0.527" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_get_my_travel_reimbursements" time="0.529" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_get_travel_stats_hr_only" time="1.079" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_location_search_requires_api_key" time="0.822" /><testcase classname="tests.test_analytics_payroll_travel.TestTravelRouter" name="test_location_search_validation" time="0.541" /><testcase classname="tests.test_analytics_payroll_travel.TestRoleBasedAccess" name="test_analytics_access_by_role" time="1.508" /><testcase classname="tests.test_analytics_payroll_travel.TestRoleBasedAccess" name="test_payroll_access_by_role" time="1.149" /><testcase classname="tests.test_analytics_payroll_travel.TestRoleBasedAccess" name="test_travel_approval_by_role" time="1.090" /><testcase classname="tests.test_analytics_payroll_travel.TestErrorHandling" name="test_404_on_invalid_travel_id" time="0.552" /><testcase classname="tests.test_analytics_payroll_travel.TestErrorHandling" name="test_400_on_invalid_payroll_month" time="0.533" /><testcase classname="tests.test_analytics_payroll_travel.TestErrorHandling" name="test_400_on_missing_required_fields" time="0.512" /><testcase classname="tests.test_analytics_payroll_travel.TestDataConsistency" name="test_analytics_data_consistency" time="0.689" /><testcase classname="tests.test_analytics_payroll_travel.TestDataConsistency" name="test_salary_slip_generate_and_retrieve" time="0.611" /></testsuite></testsuites>